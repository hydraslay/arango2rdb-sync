<div th:fragment="collectionFragment (col)">
    <th:block th:if="${col == null}">
        <article class="entity-card">
            <div class="entity-body">
                <div class="empty">Collection unavailable.</div>
            </div>
        </article>
    </th:block>
    <th:block th:if="${col != null}">
        <article class="entity-card collapsible-card" th:attr="id=${col.domId}">
            <header class="entity-header">
                <div>
                    <span class="entity-name" th:text="${col.name}"></span>
                    <span class="entity-count" th:text="'(' + ${col.totalCount} + ' documents)'"></span>
                </div>
                <button type="button"
                        class="card-toggle"
                        data-card-toggle
                        aria-expanded="true"
                        th:attr="aria-label=${'Toggle ' + col.name + ' collection'}">
                    <span class="card-toggle-icon" aria-hidden="true"></span>
                </button>
            </header>
            <div class="entity-body" th:if="${!col.columns.isEmpty()}">
                <table>
                    <thead>
                    <tr>
                        <th th:each="column : ${col.columns}"
                            th:if="${column != '_key' and column != '_rev'}"
                            th:text="${column}"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="row : ${col.rows}">
                        <td th:each="column : ${col.columns}"
                            th:if="${column != '_key' and column != '_rev'}"
                            th:text="${row.__${column}__} ?: ''"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="entity-body" th:if="${col.columns.isEmpty()}">
                <div class="empty">No data available.</div>
            </div>
            <footer class="entity-footer">
                <button class="btn" th:if="${col.hasMore}"
                        th:attr="hx-get=${'/arango/' + col.encodedName + '?size=' + col.nextSize}, hx-target=${'#' + col.domId}"
                        hx-swap="outerHTML">Load more</button>
                <button class="btn" th:if="${col.hasMore}"
                        th:attr="hx-get=${'/arango/' + col.encodedName + '?size=' + col.totalCount}, hx-target=${'#' + col.domId}"
                        hx-swap="outerHTML">Load all</button>
            </footer>
        </article>
    </th:block>
</div>
